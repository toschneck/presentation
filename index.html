<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="utf-8">

    <title>Spring Cloud - Das Microservice-Framework?</title>

    <meta name="description"
          content="End-to-end testing for web sites and common UIs with full Nagios integration, more information under https://github.com/ConSol/sakuli ">
    <meta name="author" content="Tobias Schneck">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/white.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">
    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section>
            <img class="image" height="180px" , style="background-color: #ffffff" src="pics/sc_logo.png">
            <h4>Spring Cloud</h4>

            <h3 style="padding: 0px 0 30px 0;  text-transform: inherit">
                Das Microservice-Framework?
            </h3>

            <p>
                <small>
                    <a href="http://projects.spring.io/spring-cloud/">projects.spring.io/spring-cloud</a>
                    </br>
                    <a href="https://github.com/spring-cloud">github.com/spring-cloud</a>
                </small>
            </p>
        </section>

        <section>
            <h2>Motivation</h2>
            <ul>
                <li>Microservices stellen neue Herausforderungen an den Entwickler:</li>
                <ul>
                    <li><b>Koordination</b> zwischen den Diensten</li>
                    <b>
                        <li>Konfiguration</li>
                        <li>Fehlerbehandlung</li>
                    </b>
                </ul>
                <li>Wie die neue Ansätze "einfach" und schnell anwenden?</li>
                <li>Wie vermeidet man boiler plate code?</li>
                <li>Deployment-Unterstützung für Cloud-Plattformen</li>
            </ul>
        </section>

        <section>
            <h2>Spring IO Plattform</h2>
            <img src="pics/spring-io-tree.png">
        </section>

        <section>
            <h2>Kommunikation</h2>
            <h5>in einer Microservice Architektur</h5>
            <img src="pics/CustomersStores.svg" style="border: 0; width: 65%">
        </section>

        <section>
            <section>
                <h2>Spring Cloud Config Server</h2>
<pre><code class="java" data-trim style="font-size: 0.6em">
    @Configuration
    @EnableAutoConfiguration
    @EnableConfigServer
    public class ConfigServerApplication {

    public static void main(String[] args) {
    SpringApplication.run(ConfigServerApplication.class, args);
    }
    }
</code></pre>
                <ul style="font-size: 0.8em">
                    <li>Versionierte Konfiguration via GIT</li>
                    <li>Rollbackfähig</li>
                    <li>Konfiguration liegt außerhalb des Mircoservices</li>
                    <li>Verschlüsselte Kommunikation und Speicherung</li>
                    <li>Anbindung via JSON/REST</li>
                    <li>Environment bezogenes Property-Handling</li>
                    <ul>
                        <li>Default environment <b>application.properties</b></li>
                        <li><b>&#60appname&#62-&#60envname&#62.yml</b> oder <b>*.properties</b></li>
                    </ul>
                </ul>
            </section>

            <section>
                <h2>Spring Cloud Config Client</h2>

                <div style="text-align: left">
                    <b>Application Properties:</b>

                    <p/>

<pre><code class="java" data-trim style="font-size: 0.8em">
    @Component
    @ConfigurationProperties
    public class FooProperties {

    private String foo;

    }
</code></pre>

                    <ul style="font-size: 0.8em;">
                        <li>Autokonfig via Config Server</li>
                        <li>POST to <b>/refresh</b> => erneuert und rebind aller Properties</li>
                        <li>POST to <b>/restart</b> => neustart des Application-Context</li>
                        <li>POST to <b>/env</b> => erneuert die Environment</li>
                        <li>Atomic updates (bei einem refresh)</li>
                        <li>Reset loggers bei geänderten Logging-Levels</li>
                    </ul>
                </div>
            </section>
            <section>
                <h2>Spring Cloud Config Client</h2>

                <p/>

                <h1>DEMO</h1>
            </section>
        </section>

        <section>
            <section>
                <h2>Spring Cloud Netflix</h2>
                <h4>Service Discovery - Eureka</h4>
                <ul>
                    <li>Verwaltung für alle verfügbaren Service-Instanzen</li>
                    <ul>
                        <li>Dienste registrieren</li>
                        <li>Fremde Dienste suchen</li>
                    </ul>
                    <li>Implementiert <b>Client + Server</b> auf Basis von Spring Boot</li>
                    <li>Leichte Code-Seitige Anbindung von Eureka-Clients via <b>@EnableEurekaClient</b></li>
                </ul>
            </section>
            <section>
                <h2>Spring Cloud Netflix</h2>
                <h4>Circuit Breaker - Hystrix</h4>
                <table>
                    <tbody>
                    <tr>
                        <td height="350em" style="vertical-align: top; horiz-align: left">
                            <img src="pics/hystrix-logo-tagline-vertical.png" style="border-style: none"></td>
                        <td></td>
                        <td height="350em" width="60%">
                            <img src="pics/HystrixFallback.svg" style="border-style: none">
                        </td>
                    </tr>
                    </tbody>
                </table>
                Netflix-Implementierung des Circuit Breaker - Patterns
            </section>
            <section>
                <h2>Spring Cloud Netflix</h2>
                <h4>Circuit Breaker - Hystrix</h4>

                <div style="text-align: left">
                    <b>Eigenschaften:</b>
                    <ul style="padding-bottom: 25px">
                        <li>Behandlung von Latenz- /Verfügbarkeitsproblemen</li>
                        <li>Isoliert die Dienste untereinander</li>
                        <li>Verhindert kaskadierende Fehler</li>
                    </ul>

                    <b>Implementierung:</b>
                    <br>
                    <ul>
                        <li>Fallback Methoden</li>
                        <li>Synchronous, Future, Observable Objekte</li>
                        <li>Hystrix Dashboard</li>
                        <li>Metric Aggregation</li>
                    </ul>
                    </br>
                </div>
            </section>
            <section>
                <h2>Spring Cloud Netflix</h2>
                <h4>weitere Komponenten</h4>

                <div style="text-align: left; font-size: 0.8em">
                    <div>
                        <b>Ribbon -</b>
                        <a href="https://github.com/Netflix/ribbon">github.com/Netflix/ribbon</a>
                        <br/>

                        <ul style="padding-bottom: 1em; padding-top: 0px">
                            <li>Load-Balancing auf Client-Seite</li>
                            <li>Nutze Hystrix und Eureka</li>
                        </ul>
                    </div>

                    <div>
                        <b>Feign -</b>
                        <a href="https://github.com/Netflix/feign">github.com/Netflix/feign</a>
                        <br/>
                        <ul style="padding-bottom: 1em; padding-top: 0px">
                            <li>Einbindung von Rest-Webservice per Interface</li>
                            <li>Nutzung der Service soll so einfach wie normalen Java-Objekten sein</li>
                        </ul>
                    </div>

                    <div>
                        <b>Zuul -</b>
                        <a href="https://github.com/Netflix/zuul">github.com/Netflix/zuul</a>
                        <br/>
                        <ul style="padding-bottom: 1em; padding-top: 0px">
                            <li>Rounting der Micro-Service nach außen</li>
                            <li>Mapped URLS auf andere Server</li>
                        </ul>
                    </div>

                </div>
            </section>
        </section>

        <section>
            <h2>Spring Cloud Bus</h2>
            <ul>
                <li>Lightweight Messaging Bus auf Basis von Spring Integration</li>
                <li>Anbindung via <b>spring-amqp</b>, <b>rabbitmq</b> oder <b>http</b></li>
                <li>Nachricht wird nur an einen Node gesendet</li>
                <li>POST to <b>/bus/env</b> sends environment updates
                <li>POST to <b>/bus/refresh</b> sends a refresh command</li>
            </ul>
        </section>
        <section>
            <h2>Starters</h2>
            <ul>
                <li>Einfache Project-Config (maven-parent-pom)</li>
                <li>Aufbau analog zu Spring Boot</li>
            </ul>
            <table style="margin-top: 1.5em; font-size: 0.7em">
                <tbody>
                <tr style="border: 1px solid">
                    <td style="border: 1px solid">spring-cloud-starter</td>
                    <td>spring-cloud-starter-hystrix</td>
                </tr>
                <tr style="border: 1px solid">
                    <td style="border: 1px solid">spring-cloud-starter-bus-amqp</td>
                    <td>spring-cloud-starter-hystrix-dashboard</td>
                </tr>
                <tr style="border: 1px solid">
                    <td style="border: 1px solid">spring-cloud-starter-cloudfoundry</td>
                    <td>spring-cloud-starter-turbine</td>
                </tr>
                <tr style="border: 1px solid">
                    <td style="border: 1px solid">spring-cloud-starter-eureka</td>
                    <td>spring-cloud-starter-zuul</td>
                </tr>
                <tr style="border: 1px solid">
                    <td style="border: 1px solid">spring-cloud-starter-eureka-server</td>
                </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h2>Weitere Komponenten</h2>
            <ul style="padding-top: 1em">
                <li>Spring Cloud <b>Security</b></li>
                <ul style="font-size: 0.8em">
                    <li>Unterstützt OAuth2</li>
                    <li>Zentrales Token-Handling</li>
                </ul>
                <li>Spring Cloud <b>CLI</b></li>
                <ul style="font-size: 0.8em">
                    <li>command line Unterstützung für Spring Cloud in Groovy</li>
                </ul>
                <li>Spring Cloud for <b>Cloud Foundry</b></li>
                <li>Spring Cloud for <b>Amazon Web Services</b></li>
                <li>Spring Cloud <b>Connectors</b></li>
                <ul style="font-size: 0.8em">
                    <li>Einstiegspunkt für andere PaaS-Umgebungen</li>
                    <li>Konfiguration via Java/XML (auf Spring Boot Basis)</li>
                </ul>

            </ul>
        </section>


        <section>
            <h2>Erfahrungen</h2>
            <table>
                <thead>
                <tr style="border-bottom: solid">
                    <td style="padding-right: 1em">Bewertung</td>
                    <td>Kategorie</td>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td style="text-align: center">
                        <img src="pics/bubble_gray.png"
                             style="max-height: 1em;  border: 0; box-shadow: none">
                    </td>
                    <td style="vertical-align: middle; font-size: 0.7em">
                        <b>Technologie</b><br/>
                        <ul>
                            <li>Komponenten decken einen großen Bereich des Microservice-Spektrums ab</li>
                            <li>Zusammenspiel der Komponeten ist noch nicht ausgereift</li>
                            <li>Zu viel Spring-Magic</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center">
                        <img src="pics/bubble_red.png"
                             style="max-height: 1em;  border: 0; box-shadow: none">
                    </td>
                    <td style="vertical-align: middle; font-size: 0.7em">
                        <b>Einstieg</b><br/>
                        <ul>
                            <li>Zu viel Konfiguration via <b>.yml</b> oder <b>.properties</b> files</li>
                            <li>Minimal Beispiel funktionierte nicht :-(</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center">
                        <img src="pics/bubble_red.png"
                             style="max-height: 1em;  border: 0; box-shadow: none">
                    </td>
                    <td style="vertical-align: middle; font-size: 0.7em">
                        <b>Dokumenation</b> <br/>
                        <ul>
                            <li>Funktionsweise des Technologie-Stacks wird kaum erklärt</li>
                            <li>Konfigurationsmöglichkeiten nicht vollständig</li>
                            <li>Status <b>Release-Candidate</b> fraglich</li>
                        </ul>
                    </td>
                </tr>
                </tbody>
            </table>
        </section>
        <section>
            <h2>Erfahrungen</h2>
            <table>
                <thead>
                <tr style="border-bottom: solid">
                    <td style="padding-right: 1em">Bewertung</td>
                    <td>Kategorie</td>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td style="text-align: center">
                        <img src="pics/bubble_gray.png"
                             style="max-height: 1em;  border: 0; box-shadow: none">
                    </td>
                    <td style="vertical-align: middle; font-size: 0.7em">
                        <b>Potenzial</b> <br/>
                        <ul>
                            <li>Derzeit Haupt-Commiter:<b>Dave Syer</b></li>
                            <li>Kein focusiertes Projekt bei Spring</li>
                            <li>Technologisch sehr interessant, allerdings (leider) noch nicht ausgereift</li>
                            <li>Community ist noch sehr schwach. Fragen bei Stackoverflow:
                                <ul>
                                    <li><b>42</b> zu #spring-cloud</li>
                                    <li><b>1.800</b> zu #spring-boot</li>
                                </ul>
                            </li>
                        </ul>
                    </td>
                </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h1>Vielen Dank!</h1>

            <div style="text-align: center; padding: 0.5em">
                <img src="pics/github.jpg" style="box-shadow: none; border: none; height: 6em">
            </div>
            <h4 style="text-transform: inherit">Source-Code:</h4>
            <a style="font-weight: bold; color: #268bd2" href="https://github.com/toschneck/SC_demo"
               target="_blank">
                git@github.com:toschneck/SC_demo.git
            </a>
            <br/>
            <a style="font-weight: bold; color: #268bd2" href="https://github.com/toschneck/SC_shared_config"
               target="_blank">
                git@github.com:toschneck/SC_shared_config.git
            </a>
        </section>

    </div>

</div>


<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
            {
                src: 'lib/js/classList.js', condition: function () {
                return !document.body.classList;
            }
            },
            {
                src: 'plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'plugin/highlight/highlight.js', async: true, condition: function () {
                return !!document.querySelector('pre code');
            }, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            },
            {src: 'plugin/zoom-js/zoom.js', async: true},
            {src: 'plugin/notes/notes.js', async: true}
        ]
    });
</script>
</body>
</html>
